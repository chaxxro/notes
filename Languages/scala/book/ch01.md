# 入门

## 定义变量

Scala 变量有两种：`val` 和 `var`

- `val` 初始化后就不能被重新赋值

- `var` 在整个生命周期内可以被重新赋值

当用 `val` 定义一个变量时，变量本身不能被重新赋值，但它指向的对象可能发生改变

## 定义函数

函数的形参都是 `val`

```scala
def funcName(x: Int, y: Int): Int = {
    if(x > y) x
    else y
}
```

在没有显式 `return` 时，函数返回计算的最后一个表达式的值，尽可能将每个函数当作一个最终交出一个值的表达式

编译器会自动推断函数返回类型，但当函数是递归时就必须显式给出函数的返回类型

一个函数定义在类中为这个类的方法，如果一个方法只接受一个参数，在调用它时可以不使用 `.` 和圆括号

```scala
1 to 10
// 等价于
1.to(10)
```

Scala 没有操作符概念，`*`、`/`、`+` 和 `-` 这样的字符可以被用作方法名

当用一组圆括号将一个或多个值包起来，并将其应用到某个对象时，Scala 会将这段代码转换成对这个对象的名为 `apply` 的方法调用

当用一组圆括号将一个或多个值包起来为某个对象赋值时，Scala 会将这段代码转换成对这个对象的名为 `update` 的方法调用

```scala
val g = new Array[String](3)
println(g(0))  // println(g.apply(0))
g(1) = "hello" // g.update(1, "hello)
```

### 方法结合性

如果一个方法以操作符表示时，调用默认的是左操作元，`a * b` 等价于 `a.*(b)`

但如果这个操作符以 `:` 结尾，则是右操作元，`1 :: l` 等价于 `l.::(1)`

## 函数字面量

函数字面量用圆括号括起来一组带名字的参数，`=>` 为函数体

```scala
(x: Int, y: Int) => x + y
```

## 操作符

操作符即方法，可以在操作符表示法中使用任何方法，即省略 `.` 来调用方法，如果方法是多个参数，则需将参数放入圆括号中

```scala
val s = "hello"
s indexOf 'e'
s indexOf ('l', 1)
```

- 中缀操作符表示法：被调用的方法放在对象和传入的参数中间

- 前缀操作符表示法：将方法放在对象前面

- 后缀操作符表示法：将方法放在对象后面

```scala
-7 // 前缀
7 toLong // 后缀
```

中缀操作符接受两个操作元，前缀和后缀操作符接受一个操作元

前缀操作符是调用方法的一种简写，方法名称是 `unary_` 加上操作符，`-2` 会被翻译成 `2.unary_-`，只有 `!`、`+`、`-` 和 `~` 可以用作操作符

后缀操作符是那些不接受参数的方法

## 分号推断

每条语句最后的分号都是可选的

代码号末尾满足以下任何一个条件才会被当作有分号处理

- 当前行以一个不能作为语句结尾的词结尾，比如 `.` 或中缀操作符

- 下一行以一个不能作为语句开头的词开头

- 当前行出现在 `()` 或 `[]` 中

## 数组

Scala 数组是 `Array[T]`，访问方式是将下标放在圆括号中，且数组本身是可变的

数组本质是类的实例

```scala
val n: Array[Int] = new Array[Int](3)
val g = new Array[Int](3)

// 伴生对象
val n = Array(1, 2, 3)
```

使用伴生对象创造对象，实际上是调用了一个 `apply` 的工厂方法，该方法返回一个新的数组，类似于调用了 `Array` 类的一个静态方法

## 列表

数组 `Array` 是可变对象，可以改变它的元素值，`List` 是不可变的，当调用某个会改变这个列表的方法时，实际上创建一个带有新值的新列表

```scala
// 伴生对象
val l = List(1, 2, 3)
```

`:::` 用于列表拼接，`::` 用于在列表最前面添加一个新元素

`Nil` 用来表示空列表

`:+` 用来在列表尾部追加元素，但由于列表特性很少使用该方法，需要在末尾追加元素可以使用 `ListBuffer`，也可以依次在头部添加元素，最后 `reverse`

## 元组

元组也是不可变类型，可以包含不同类型元素

实例化一个新的元组，只需将对象放在圆括号中，并用逗号隔开

访问字段使用 `._N`，索引从 1 开始

```scala
val pair = (1, "one")
println(pair._1)
println(pair._2)
```

任意对象都可以调用 `->` 方法创建两个元素的元组

## Set

`Set` 是 trait，类似于 Java 的接口

可以用使用 `Set` 伴生对象的 `apply` 工厂方法创建 `Set`

要向不可变 `Set` 添加新的元素，可以调用 `+` 方法，`+` 方法创建并返回一个新的包含了新元素的不可变 `Set`

对于可变 `Set`，可以使用 `+=` 添加元素

## Map

Scala 也提供了可变和不可变 `Map`，也可以使用工厂方法创建和初始化

```scala
import scala.collection.mutable
val m = mutable.Map[Int, String]()
m += (1 -> "Hello")
```

`Map` 的键值对使用元组表示