# 内核态

在 cpu 的一些指令中，有的指令如果用错，将会导致整个系统崩溃；分了内核态和用户态后，当用户需要操作这些指令时候，内核为其提供了API，可以通过系统调用陷入内核，让内核去执行这些操作

用户态和内核态是操作系统的两种运行级别，两者最大的区别就是特权级不同

用户态拥有最低的特权级，内核态拥有较高的特权级，运行在用户态的程序不能直接访问操作系统内核数据结构和程序

内核态和用户态之间的转换方式主要包括：系统调用，异常和中断

- 系统调用：用户进程通过系统调用申请操作系统提供的服务程序完成工作

- 异常：当 CPU 在执行运行在用户态下的程序时，发生了某些事先不可知的异常，就会触发由当前运行进程切换到处理此异常的内核相关程序中，也就转到了内核态，比如缺页异常

- 中断：当外围设备完成用户请求的操作之后，会向 CPU 发出相应的中断信号，这时 CPU 会暂停执行下一条将要执行的指令，转而去执行中断信号的处理程序，如果先执行的指令是用户态下的程序，那么这个转换的过程自然也就发生了有用户态到内核态的切换