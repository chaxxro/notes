# set

`set` 命令用来修改 Shell 环境的运行参数

如果命令行下不带任何参数，直接运行 `set`，会显示所有的环境变量和 Shell 函数

`set -` 开启参数，`set +` 关闭参数

## `set -u`

执行脚本的时候，如果遇到不存在的变量，Bash 默认忽略它

脚本在头部加上 `set -u`，遇到不存在的变量就会报错，并停止执行

## `set -x`

默认情况下，脚本执行后，屏幕只显示运行结果，没有其他内容

`set -x` 用来在运行结果之前，先输出执行的那一行命令

## `set -e`

脚本里面有运行失败的命令（返回值非 0），Bash 默认会继续执行后面的命令

`set -e` 脚本只要发生错误，就终止执行

但是某些命令的非零返回值可能不表示失败，或者开发者希望在命令失败的情况下，脚本继续执行下去，这时可以 `set +e` 暂时关闭 `set -e`，该命令执行结束后，再重新打开 `set -e`

`set -e` 不适用于管道命令，因为 Bash 会把最后一个子命令的返回值，作为整个命令的返回值，而管道命令总是会执行成功，因此它后面命令依然会执行，`set -e` 就失效了，这时可以使用 `set -o pipefail`